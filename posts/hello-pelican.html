<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <title>Hello Pelican - Cynosura</title>
    <meta name="description" content="尝试利用 Pelican 替代原本使用的 Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Pelican">
    <!--主题色-->
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#EBF4F4">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#121212">
    <!--Open Graph protocol-->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Hello Pelican - Cynosura">
    <meta property="og:description" content="尝试利用 Pelican 替代原本使用的 Hexo">
    <meta property="og:url" content="https://cynosura.one/posts/hello-pelican.html">
    <meta property="og:image" content="https://cynosura.one/img/banner.webp">
    <!--Twitter Card-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@astraorsa">
    <meta name="twitter:title" content="Hello Pelican - Cynosura">
    <meta name="twitter:description" content="尝试利用 Pelican 替代原本使用的 Hexo">
    <meta name="twitter:image" content="https://cynosura.one/img/banner.webp">
    <!--链接样式-->
    <link rel="stylesheet" type="text/css" href="https://cynosura.one/css/style.css?v=3.4">
    <link rel="icon" type="image/x-icon" href="https://cynosura.one/img/favicon.ico">
    <!--Sitemap-->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="https://cynosura.one/posts/sitemap.xml">
    <!--Feed RSS-->
    <link rel="alternate" type="application/atom+xml" title="Cynosura Full Atom Feed" href="https://cynosura.one/posts/feeds/all.atom.xml">
</head>
<body>
    <header>
        <div class="avatar"><img src="https://cynosura.one/img/avatar.webp" alt="avatar" class="avatar-img"></div>
        <h1 class="title">Cynosura</h1>
        <nav class="menu">
            <ul>
                <li><a href="https://cynosura.one" class="menu-link">首页</a></li>
                <li><a href="https://cynosura.one/posts/" class="menu-link-active">文章</a></li>
                <li><a href="https://cynosura.one/friends" class="menu-link">友人</a></li>
                <li><a href="https://cynosura.one/about" class="menu-link">关于</a></li>
            </ul>
        </nav>
    </header>
<div class="page-main">
    <div class="page-main-center">
        <article class="post-card card">
            <div>
                <h1 class="post-title">Hello Pelican</h1>
                
            </div>
            <div class="post-content">
                <p>尝试利用 <a href="https://getpelican.com">Pelican</a> 替代原本使用的 Hexo，并废除了独立 Blog 入口。</p>
<p>Pelican 上手还是挺简单的，基本上参照 <a href="https://docs.getpelican.com/en/latest/quickstart.html">官方文档</a> 即可快速生成可用的文章页。</p>
<p>相较于 Hexo，Pelican 基于 Python，终于不用被 Node.js 那堆依赖折腾得死去活来了，整体操作逻辑也更加清晰。但由于 Pelican 的用户较少，网络上可用的主题屈指可数，无意中拉高了使用门槛。建议对 Pelican 有兴趣的可以像我一样动手折腾自定义主题；基于官方的 simple 主题修改不难，只要对着文档修改，加上自己的一点样式即可。</p>
<p>用半天时间移植了原本用于 Hexo 的自定义主题，目前只修改好了 base、article 和 index 页就仓促上线了，难免存在疏漏。如果遇到样式问题请在下面留言告诉我，非常感谢~</p>
<h2>增加 RSS 支持</h2>
<p>斟酌再三，还是决定为文章页增加 RSS (实际是 Atom) 支持，仅需在配置文件里指定生成路径即可。</p>
<div class="highlight"><pre><span></span><code><span class="n">FEED_ALL_ATOM = &#39;feeds/all.atom.xml&#39;</span>
<span class="n">FEED_DOMAIN = SITEURL</span>
<span class="n">FEED_MAX_ITEMS  =  15</span>
<span class="n">RSS_FEED_SUMMARY_ONLY = False</span>
<span class="n">CATEGORY_FEED_ATOM = None</span>
<span class="n">TRANSLATION_FEED_ATOM = None</span>
<span class="n">AUTHOR_FEED_ATOM = None</span>
<span class="n">AUTHOR_FEED_RSS = None</span>
</code></pre></div>

<p><code>FEED_ALL_ATOM</code> 指定 RSS 的生成位置。Pelican 提倡尽量使用绝对地址，这种理念在 <a href="https://docs.getpelican.com/en/stable/settings.html#feed-settings">官方文档</a> 的相关设置中就有所体现。</p>
<p>若该值未设置成绝对地址，则在每次生成中会跳出警告：Feeds generated without SITEURL set properly may not be valid。要使用相对地址并去除警告，则必须设置 FEED_DOMAIN。</p>
<p><code>FEED_DOMAIN</code> 指定 RSS 生成域名，可直接使用 SITEURL 变量，更加灵活。</p>
<p><code>FEED_MAX_ITEMS</code> 设置 RSS 生成的最大文章量。这里推荐设置一个合适的限制值，以防文章较多时，RSS 为读者推送动辄上百篇的文章，影响阅读体验。我认为设置在 10~20 篇左右为宜。</p>
<p><code>RSS_FEED_SUMMARY_ONLY</code> 指定 RSS 包括全文，还是仅生成摘要信息。个人建议 RSS 包含全文而非摘要，仅生成摘要虽然能引导读者跳转到网站阅读，但这种操作十分影响阅读体验。试想当你在阅读器看到感兴趣的文章，却要跳转到网页才能继续观看，你会选择跳转还是直接关闭呢，相信你心里自有答案。</p>
<p>设置并重新执行文章生成后，RSS 就会在指定位置生成好了，添加到网页任意位置即可。</p>
<h2>生成站点地图 (Sitemap)</h2>
<p>生成站点地图 (Sitemap) 可以告诉搜索引擎应该抓取哪些页面，及文章优先级排序，从而帮助搜索引擎准确收录文章。Pelican 支持通过 pip 来安装及管理插件，安装 <a href="https://github.com/pelican-plugins/sitemap">Sitemap 插件</a> 并写入配置文件，即可一键生成站点地图。</p>
<p>首先通过 pip 来安装插件: <code>python -m pip install pelican-sitemap</code></p>
<p>安装完成后，将如下信息放入配置文件，并重新生成站点。</p>
<div class="highlight"><pre><span></span><code>SITEMAP = {
    &quot;format&quot;: &quot;xml&quot;,
    &quot;priorities&quot;: {
        &quot;articles&quot;: 0.8,
        &quot;indexes&quot;: 1.0,
        &quot;pages&quot;: 0.8
    },
    &quot;changefreqs&quot;: {
        &quot;articles&quot;: &quot;monthly&quot;,
        &quot;indexes&quot;: &quot;daily&quot;,
        &quot;pages&quot;: &quot;monthly&quot;
    }
}
</code></pre></div>

<p>其中 <code>priorities</code> 指定了页面的优先级，<code>changefreqs</code> 则告知搜索引擎页面的更新频率。一般首页拉取频率设置高一点，文章不是周更的就保持默认月更选项，无需变动。</p>
<p>生成站点地图并部署在服务器以后，在 <a href="https://search.google.com/search-console">Google Search Console</a> 填入站点地图的 URL 地址并上传，之后 Google 将会定期抓取站点地图并生成索引收录。</p>
            </div>
        </article>
        <div class="post-footer">
            <div class="post-meta card">
                <h2>本文信息</h2>
                    <p><strong>作者: </strong>Frudrax Cheng</p>
                <p><strong>发布时间:</strong>
                    <time class="published" datetime="2023-07-27T21:07:00+08:00">
                    2023-07-27 (周四)
                    </time>
                </p>
                <p><strong>文章分类: </strong>技术</p>
                <p><strong>链接: </strong><a href="https://cynosura.one/posts/hello-pelican.html" title="Hello Pelican" class="p-link">https://cynosura.one/posts/hello-pelican.html</a></p>
            </div>
            <div class="copyright card">
                <h2>版权许可</h2>
                <p><strong>声明: </strong>本文所有内容（包括图片）</p>
                <p>均采用 <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International License">CC BY-SA 4.0</a> 协议授权</p>
                <p>转载请注明出处，并附上本声明内容</p>
                <img class="icon" src="https://cynosura.one/img/icons/creative-icon.svg" alt="creative-icon">
                <img class="icon" src="https://cynosura.one/img/icons/creative-icon-by.svg" alt="creative-icon-by">
                <img class="icon" src="https://cynosura.one/img/icons/creative-icon-sa.svg" alt="creative-icon-sa">
            </div>
        </div>
        <div class="comments post-card card">
            <h2 class="post-title">评论</h2>
            <p class="comments-tips">评论系统使用 Disqus，加载需启用 JavaScript</p>
            <div id="disqus_thread"></div>
            <!-- 添加一个按钮 -->
            <button id="load_disqus" class="comments-button button">加载评论</button>
            <!-- Disqus 留言板容器 -->
            <div id="disqus_thread_container"></div>
        </div>
        <script>
            // 点击按钮后加载 Disqus 留言板
            document.getElementById('load_disqus').addEventListener('click', function() {
                // 添加 Disqus 留言板脚本
                var disqusScript = document.createElement('script');
                disqusScript.src = 'https://cynosura-one.disqus.com/embed.js';
                disqusScript.setAttribute('data-timestamp', +new Date());
                document.head.appendChild(disqusScript);
                // 移动 Disqus 留言板内容到容器中
                var disqusContainer = document.getElementById('disqus_thread_container');
                disqusContainer.appendChild(document.getElementById('disqus_thread'));
                // 隐藏按钮，防止重复加载
                this.style.display = 'none';
            });
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <footer>
        <p>Copyright &copy; 2023 Cynosura</p>
        <div class="footer-links">Powered by <a href="https://getpelican.com/">Pelican</a> | <button class="footer-button" onclick="window.location.href='https://cynosura.one/posts/feeds/all.atom.xml'" type="button" id="rss-button" title="RSS Feed"></button></div>
        <script src="https://cynosura.one/js/toggle.js?v=1.1" defer></script>
    </footer>
</body>
</html>